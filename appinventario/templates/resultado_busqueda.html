<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultado de Búsqueda</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Resultado de Búsqueda</h1>
            <a href="/buscar_producto" class="btn-back">← Buscar otro producto</a>
        </header>
        
        <main>
            {% if error %}
                <div class="error-message">
                    <p>{{ error }}</p>
                </div>
            {% else %}
                <h2>Producto encontrado ({{ tipo }})</h2>
                
                <form id="editForm" class="edit-form" data-tipo="{{ tipo }}" data-producto-id="{{ producto.id }}">
                    <!-- Campo para cambiar grupo -->
                    <div class="form-group">
                        <label for="grupo_id">Grupo:</label>
                        <select name="grupo_id" id="grupo_id" required>
                            {% for grupo in grupos %}
                            <option value="{{ grupo.id }}" {% if producto.grupo_id == grupo.id %}selected{% endif %}>
                                {{ grupo.nombre }} - {{ grupo.descripcion }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                    
                    {% if tipo == 'dispositivo' %}
                        <div class="form-group">
                            <label for="responsable">Responsable:</label>
                            <input type="text" name="responsable" value="{{ producto.responsable }}" placeholder="Responsable">
                        </div>
                        
                        <div class="form-group">
                            <label for="marca">Marca:</label>
                            <input type="text" name="marca" value="{{ producto.marca }}" placeholder="Marca">
                        </div>
                        
                        <div class="form-group">
                            <label for="vpn">VPN:</label>
                            <input type="text" name="vpn" value="{{ producto.vpn }}" placeholder="VPN">
                        </div>
                        
                        <div class="form-group">
                            <label for="canal_vpn">Canal VPN:</label>
                            <input type="text" name="canal_vpn" value="{{ producto.canal_vpn }}" placeholder="Canal VPN">
                        </div>
                        
                        <div class="form-group">
                            <label for="room">Room:</label>
                            <input type="text" name="room" value="{{ producto.room }}" placeholder="Room">
                        </div>
                        
                        <div class="form-group">
                            <label for="cuentas_tiktok">Cuentas de TikTok:</label>
                            <input type="text" name="cuentas_tiktok" value="{{ producto.cuentas_tiktok }}" placeholder="Cuentas de TikTok">
                        </div>
                        
                        <div class="form-group">
                            <label for="pais">País:</label>
                            <input type="text" name="pais" value="{{ producto.pais }}" placeholder="País">
                        </div>
                        
                        <div class="form-group">
                            <label for="apple_id">Apple ID:</label>
                            <input type="text" name="apple_id" value="{{ producto.apple_id }}" placeholder="Apple ID">
                        </div>
                        
                        <div class="form-group">
                            <label for="foto">URL de la foto:</label>
                            <input type="text" name="foto" value="{{ producto.foto }}" placeholder="URL de la foto">
                            {% if producto.foto %}
                            <div style="margin-top: 10px;">
                                <img src="{{ producto.foto }}" alt="Foto del producto" style="max-width: 200px; max-height: 200px;">
                            </div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="costo">Costo:</label>
                            <input type="number" step="0.01" name="costo" value="{{ producto.costo }}" placeholder="Costo">
                        </div>
                        
                        <div class="form-group">
                            <label for="comentarios">Comentarios:</label>
                            <textarea name="comentarios" placeholder="Comentarios">{{ producto.comentarios }}</textarea>
                        </div>
                    {% elif tipo == 'producto_venta' %}
                        <div class="form-group">
                            <label for="marca">Marca:</label>
                            <input type="text" name="marca" value="{{ producto.marca }}" placeholder="Marca">
                        </div>
                        
                        <div class="form-group">
                            <label for="descripcion">Descripción:</label>
                            <input type="text" name="descripcion" value="{{ producto.descripcion }}" placeholder="Descripción">
                        </div>
                        
                        <div class="form-group">
                            <label for="caducidad">Caducidad:</label>
                            <input type="date" name="caducidad" value="{{ producto.caducidad }}" placeholder="Caducidad">
                        </div>
                        
                        <div class="form-group">
                            <label for="costo">Costo:</label>
                            <input type="number" step="0.01" name="costo" value="{{ producto.costo }}" placeholder="Costo">
                        </div>
                        
                        <div class="form-group">
                            <label for="lote">Lote:</label>
                            <input type="text" name="lote" value="{{ producto.lote }}" placeholder="Lote">
                        </div>
                    {% elif tipo == 'material_general' %}
                        <div class="form-group">
                            <label for="nombre">Nombre:</label>
                            <input type="text" name="nombre" value="{{ producto.nombre }}" placeholder="Nombre">
                        </div>
                        
                        <div class="form-group">
                            <label for="tipo">Tipo:</label>
                            <input type="text" name="tipo" value="{{ producto.tipo }}" placeholder="Tipo">
                        </div>
                        
                        <div class="form-group">
                            <label for="room">Room:</label>
                            <input type="text" name="room" value="{{ producto.room }}" placeholder="Room">
                        </div>
                        
                        <div class="form-group">
                            <label for="precio">Precio:</label>
                            <input type="number" step="0.01" name="precio" value="{{ producto.precio }}" placeholder="Precio">
                        </div>
                    {% endif %}
                    
                    <button type="submit" class="btn-submit">Guardar Cambios</button>
                </form>
                
                <form id="deleteForm" method="POST" action="/eliminar_producto/{{ tipo }}/{{ producto.id }}" class="delete-form">
                    <button type="submit" onclick="return confirm('¿Estás seguro de que quieres eliminar este producto?')" class="btn-delete">Eliminar Producto</button>
                </form>
                
                <div id="message" class="message"></div>
            {% endif %}
        </main>
    </div>
    
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>